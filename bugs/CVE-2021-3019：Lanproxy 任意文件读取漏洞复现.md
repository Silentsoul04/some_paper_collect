> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/ADPLi-lOVlbqUKJ1OY46ww)

  

**上方蓝色字体关注我们，一起学安全！**

**作者：****蔷薇  
**

**本文字数：499**

**阅读时长：1～2min**

**声明：请勿用作违法用途，否则后果自负**

**0x01 简介**  

  

Lanproxy 是 ffay 个人开发者的一个可将局域网内服务代理到公网的内网穿透工具。

**0x02 漏洞概述**  

  

Lanproxy 0.1 存在路径遍历漏洞，该漏洞允许目录遍历读取 /../conf/config.properties 来获取到内部网连接的凭据。

**0x03 影响版本**  

  

Lanproxy 0.1  

**0x04 环境搭建**  

  

1、下载安装包

发布包地址：

```
https://file.nioee.com/d/2e81550ebdbd416c933f/
```

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsjnOKojHw6O3WYH8oq1xHvRrODBrymR47bDnM3GdlyDWDrzFgKWMK3MmwkE8aGVJoENIpJE8AySmQ/640?wx_fmt=png)

2、安装，启动

（复现只下载服务端版本即可，放在一个已经配置好 java 环境的 linux 的服务器中。）  

```
mv proxy-server-0.1 /usr/local/
vim /usr/local/proxy-server-0.1/conf/config.properties   //修改配置文件
```

修改管理员的用户名和密码。（可随意）

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsjnOKojHw6O3WYH8oq1xHvRf2iabJP0CqtqT2K6HS6RBYGXZIdgTUXGzgd2d7SaIGicJr7HFYfCDoXA/640?wx_fmt=png)  

```
cd /usr/local/proxy-server-0.1/bin  //进入文件目录
chmod +x startup.sh    //授予可执行权限
./startup.sh       //启动服务
```

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsjnOKojHw6O3WYH8oq1xHvR0QjCQ8X82HfF2nAJsbd2evDkVPpmMQ9ib8q10B7sd9BbrypBATcjuGw/640?wx_fmt=png)

访问服务页面管理地址：

```
http://10.1.8.172:8090/
```

搭建好的漏洞环境如下：  

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsjnOKojHw6O3WYH8oq1xHvRaJX9mMCaRaficdxNib3heba8AfVfG8KmiaDW3Z1Nu1nFNBVibhSUR7IjDg/640?wx_fmt=png)

**0x05 漏洞复现**  

  

访问服务页面管理地址，抓包  
利用../ 进行路径遍历读取文件  
例如../conf/config.properties  

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsjnOKojHw6O3WYH8oq1xHvR5Nl36S1YaRjKYz2SXq0n0yMBr98cESlL0iaBKZfQxEYDotlIUfcIy4Q/640?wx_fmt=png)

同理可知，可以读取其他敏感文件，例如 / etc/passwd

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsjnOKojHw6O3WYH8oq1xHvRWh6oQQLk3XnBaW249F1oBzGhajKQlfO9Rka1TJeBVePOLY6HCgYZVg/640?wx_fmt=png)

**0x06 修复方式**  

  

目前厂商已发布升级补丁以修复漏洞，补丁获取链接：

```
https://github.com/ffay/lanproxy/commits/master
```

  

![](https://mmbiz.qpic.cn/mmbiz_png/VfLUYJEMVsiaASAShFz46a4AgLIIYWJQKpGAnMJxQ4dugNhW5W8ia0SwhReTlse0vygkJ209LibhNVd93fGib77pNQ/640?wx_fmt=png)

  

![](https://mmbiz.qpic.cn/mmbiz_jpg/VfLUYJEMVshAoU3O2dkDTzN0sqCMBceq8o0lxjLtkWHanicxqtoZPFuchn87MgA603GrkicrIhB2IKxjmQicb6KTQ/640?wx_fmt=jpeg)

**阅读原文看更多复现文章  
**

Timeline Sec 团队  

安全路上，与你并肩前行